(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{579:function(t,a,e){"use strict";e.r(a);var s=e(13),r=Object(s.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h2",{attrs:{id:"以太坊账户"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#以太坊账户"}},[t._v("#")]),t._v(" 以太坊账户")]),t._v(" "),e("p",[t._v("当我们在使用钱包时候，可以通过钱包来创建一个账户，也可以通过导入私钥的形式，从链上导入一个以太坊账号。除此之外，如果你编写过智能合约，可能还会听说过一个叫做"),e("code",[t._v("Address")]),t._v("的库，这个库中有一个函数是这样的：")]),t._v(" "),e("div",{staticClass:"language-solidity line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-solidity"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("isContract")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("address")]),t._v(" account"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("internal")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("view")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("returns")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("bool")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" account"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("code"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br")])]),e("p",[t._v("这个函数的作用是判断一个地址是合约地址还是非合约地址。")]),t._v(" "),e("p",[t._v("那么就由此产生了一个问题，合约账户和钱包账户到底有什么区别？")]),t._v(" "),e("h3",{attrs:{id:"帐户类型"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#帐户类型"}},[t._v("#")]),t._v(" 帐户类型")]),t._v(" "),e("p",[t._v("以太坊有两种帐户类型：")]),t._v(" "),e("ul",[e("li",[t._v("外部持有 – 私钥的所有者控制")]),t._v(" "),e("li",[t._v("合约 – 一种由代码控制，部署在网络上的智能合约。 了解"),e("a",{attrs:{href:"https://ethereum.org/zh/developers/docs/smart-contracts/",target:"_blank",rel:"noopener noreferrer"}},[t._v("智能合约"),e("OutboundLink")],1),t._v("。")])]),t._v(" "),e("p",[t._v("这两种帐户类型都能：")]),t._v(" "),e("ul",[e("li",[t._v("接收、持有和发送 ETH 和 token")]),t._v(" "),e("li",[t._v("与已部署的智能合约进行交互")])]),t._v(" "),e("h3",{attrs:{id:"主要区别"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#主要区别"}},[t._v("#")]),t._v(" 主要区别")]),t._v(" "),e("p",[e("strong",[t._v("外部持有")])]),t._v(" "),e("ul",[e("li",[t._v("创建帐户是免费的")]),t._v(" "),e("li",[t._v("可以发起交易")]),t._v(" "),e("li",[t._v("外部所有的帐户之间只能进行 ETH 和代币交易")])]),t._v(" "),e("p",[e("strong",[t._v("合约")])]),t._v(" "),e("ul",[e("li",[t._v("创建合约存在成本，因为需要使用网络存储空间")]),t._v(" "),e("li",[t._v("只能在收到交易时发送交易")]),t._v(" "),e("li",[t._v("从外部帐户向合约帐户发起的交易能触发可执行多种操作的代码，例如转移代币甚至创建新合约")])]),t._v(" "),e("h2",{attrs:{id:"帐户组成"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#帐户组成"}},[t._v("#")]),t._v(" 帐户组成")]),t._v(" "),e("p",[t._v("以太坊帐户有四个字段：")]),t._v(" "),e("ul",[e("li",[e("code",[t._v("nonce")]),t._v(" – 显示从帐户发送的交易数量的计数器。 这将确保交易只处理一次。 在合约帐户中，这个数字代表该帐户创建的合约数量\n"),e("ul",[e("li",[t._v("这个nonce值一般通过钱包自动生成，但在某些情况下，你也可以自己指定nonce值")])])]),t._v(" "),e("li",[e("code",[t._v("balance")]),t._v(" – 这个地址拥有的 Wei 数量。 Wei 是以太币的计数单位，每个 ETH 有 1e+18 Wei。\n"),e("ul",[e("li",[t._v("对于刚接触以太坊的用户来说，存在一个常见的误区就是误认为只有用户账户才会持有余额，实际上，可以通过"),e("code",[t._v("address(this).balance")]),t._v("的方法获得合同的余额")])])]),t._v(" "),e("li",[e("code",[t._v("codeHash")]),t._v(" - 该哈希表示以太坊虚拟机 (EVM) 上的帐户"),e("em",[t._v("代码")]),t._v("。 合约帐户具有编程的代码片段，可以执行不同的操作。 如果帐户收到消息调用，则执行此 EVM 代码。 与其他帐户字段不同，不能更改。 所有代码片段都被保存在状态数据库的相应哈希下，供后续检索。 此哈希值称为 codeHash。\n"),e("ul",[e("li",[t._v("对于外部持有的帐户，codeHash 字段是空，这也是判断地址是否是合约地址的方法")])])]),t._v(" "),e("li",[e("code",[t._v("storageRoot")]),t._v(" – 有时被称为存储哈希。 Merkle Patricia Trie 根节点的 256 位哈希已编码了帐户的存储内容（256 位整数值映射），并编码为 Trie，作为来自 256 的 Keccak 256 位哈希的映射位整数键，用于 RLP 编码的 256 位整数值。 此 Trie 对此帐户存储内容的哈希进行编码，默认情况下为空。")])]),t._v(" "),e("p",[e("img",{attrs:{src:"https://ethereum.org/static/19443ab40f108c985fb95b07bac29bcb/302a4/accounts.png",alt:"account image"}})]),t._v(" "),e("h3",{attrs:{id:"mpt树"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#mpt树"}},[t._v("#")]),t._v(" MPT树")]),t._v(" "),e("p",[t._v("MPT(Merkle Patricia Trie)，是一种用hash索引数据的前缀树。通过key去查询value，就是用key在MPT树上进行索引，在经过多个中间节点后，最终到达存储数据的叶子节点。如图是全局状态树，4个叶子节点（key/value值）通过如下组织形式，构成状态树。")]),t._v(" "),e("p",[e("img",{attrs:{src:"D:%5CgithubRepo%5Cblog.vuepress%5Cpublic%5Cmpt.png",alt:""}})]),t._v(" "),e("h3",{attrs:{id:"外部账户的公私钥原理"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#外部账户的公私钥原理"}},[t._v("#")]),t._v(" 外部账户的公私钥原理")]),t._v(" "),e("h4",{attrs:{id:"什么是外部账户"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#什么是外部账户"}},[t._v("#")]),t._v(" 什么是外部账户")]),t._v(" "),e("p",[t._v("一个帐户由一对加密密钥组成：公钥和私钥。它们有助于证明交易实际上是由发件人签署的，并防止伪造。您的私钥是您用来签署交易的，因此它授予您对与您的帐户相关联的资金的保管权。你从来没有真正持有加密货币，你持有私钥——资金总是在以太坊的分类账上。")]),t._v(" "),e("p",[t._v("这可以防止恶意行为者广播虚假交易，因为您始终可以验证交易的发送者。")]),t._v(" "),e("p",[t._v("如果 Alice 想从她自己的账户向 Bob 的账户发送以太币，Alice 需要创建一个交易请求并将其发送到网络进行验证。以太坊对公钥加密的使用确保了 Alice 可以证明她最初发起了交易请求。如果没有加密机制，恶意对手 Eve 可以简单地公开广播一个看起来像“从 Alice 的账户向 Eve 的账户发送 5 ETH”的请求，并且没有人能够验证它不是来自 Alice。")]),t._v(" "),e("h4",{attrs:{id:"账户创建"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#账户创建"}},[t._v("#")]),t._v(" 账户创建")]),t._v(" "),e("p",[t._v("当您想创建一个帐户时，大多数库都会为您生成一个随机私钥。")]),t._v(" "),e("p",[t._v("私钥由 64 个十六进制字符组成，可以使用密码进行加密。")]),t._v(" "),e("p",[t._v("例子：")]),t._v(" "),e("p",[e("code",[t._v("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd036415f")])]),t._v(" "),e("p",[t._v("公钥是使用"),e("a",{attrs:{href:"https://wikipedia.org/wiki/Elliptic_Curve_Digital_Signature_Algorithm",target:"_blank",rel:"noopener noreferrer"}},[t._v("椭圆曲线数字签名算法"),e("OutboundLink")],1),t._v("从私钥生成的。通过获取公钥的 Keccak-256 哈希的最后 20 个字节并添加"),e("code",[t._v("0x")]),t._v("到开头，您可以获得您帐户的公共地址。")])])}),[],!1,null,null,null);a.default=r.exports}}]);